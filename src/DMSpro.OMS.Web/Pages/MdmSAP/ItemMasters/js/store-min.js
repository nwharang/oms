let readOnly=!0,enumValue={manageItem:[],expiredType:[],itemTypes:[],valuationMethod:[]},gridInfo={itemAttr:{},data:{},element:{loadingPanel:$('<div class"fixed"/>'),popup:$("<div/>").appendTo("body"),form:$("<div/>"),tabs:$("<div/>"),tabsElement:[createInventory(),createPurchasing(),createSales(),createAttribute()]},instance:{loadingPanel:null,popup:null,form:null,tabs:null,mainGrid:null}},rpcService={itemMasterService:dMSpro.oMS.mdmSapService.items.item,uomService:dMSpro.oMS.mdmSapService.uoms.uom,uomGroupService:dMSpro.oMS.mdmSapService.uomGroups.uomGroup,uomGroupDetailService:dMSpro.oMS.mdmSapService.uomGroupDetails.uomGroupDetail,vatService:dMSpro.oMS.mdmSapService.vats.vat,itemAttr:dMSpro.oMS.mdmSapService.attributeConfigs.attributeConfig,itemAttrValue:dMSpro.oMS.mdmSapService.attributeValues.attributeValue},l=abp.localization.getResource("OMS"),store={getVATs:new DevExpress.data.CustomStore({key:"id",loadMode:"raw",cacheRawData:!0,load(e){const t=$.Deferred(),r={};return requestOptions.forEach((t=>{t in e&&isNotEmpty(e[t])&&(r[t]=JSON.stringify(e[t]))})),rpcService.vatService.getListDevExtreme(r).done((e=>{t.resolve(e.data,{totalCount:e.totalCount,summary:e.summary,groupCount:e.groupCount})})),t.promise()}}),getItemAttrValue:new DevExpress.data.CustomStore({key:"id",loadMode:"raw",cacheRawData:!0,load(e){const t=$.Deferred(),r={};return requestOptions.forEach((t=>{t in e&&isNotEmpty(e[t])&&(r[t]=JSON.stringify(e[t]))})),rpcService.itemAttrValue.getListDevExtreme(r).done((e=>{t.resolve(e.data,{totalCount:e.totalCount,summary:e.summary,groupCount:e.groupCount})})),t.promise()}}),getUOMs:new DevExpress.data.CustomStore({key:"id",loadMode:"raw",cacheRawData:!0,load(e){const t=$.Deferred(),r={};return requestOptions.forEach((t=>{t in e&&isNotEmpty(e[t])&&(r[t]=JSON.stringify(e[t]))})),rpcService.uomService.getListDevExtreme(r).done((e=>{t.resolve(e.data,{totalCount:e.totalCount,summary:e.summary,groupCount:e.groupCount})})),t.promise()}}),getUOMsGroup:new DevExpress.data.CustomStore({key:"id",loadMode:"raw",cacheRawData:!0,load(e){const t=$.Deferred(),r={};return requestOptions.forEach((t=>{t in e&&isNotEmpty(e[t])&&(r[t]=JSON.stringify(e[t]))})),rpcService.uomGroupService.getListDevExtreme(r).done((e=>{t.resolve(e.data,{totalCount:e.totalCount,summary:e.summary,groupCount:e.groupCount})})),t.promise()}}),getUOMsGroupDetailStore:new DevExpress.data.CustomStore({key:"id",loadMode:"raw",cacheRawData:!0,load(e){const t=$.Deferred(),r={};return requestOptions.forEach((t=>{t in e&&isNotEmpty(e[t])&&(r[t]=JSON.stringify(e[t]))})),rpcService.uomGroupDetailService.getListDevExtreme(r).done((e=>{t.resolve(e.data,{totalCount:e.totalCount,summary:e.summary,groupCount:e.groupCount})})),t.promise()}}),itemStore:new DevExpress.data.CustomStore({key:"id",load(e){const t=$.Deferred(),r={};return requestOptions.forEach((t=>{t in e&&isNotEmpty(e[t])&&(r[t]=JSON.stringify(e[t]))})),rpcService.itemMasterService.getListDevExtreme(r).done((e=>{t.resolve(e.data,{totalCount:e.totalCount,summary:e.summary,groupCount:e.groupCount})})),t.promise()},byKey:function(e){if(!e)return null;let t=new $.Deferred;return rpcService.itemMasterService.get(e).done((e=>{t.resolve(e)})),t.promise()},insert:e=>rpcService.itemMasterService.create(e,{contentType:"application/json"}),update:(e,t)=>rpcService.itemMasterService.update(e,t,{contentType:"application/json"}),remove:e=>rpcService.itemMasterService.delete(e)})};$((()=>{enumValue={manageItem:[{id:0,text:l("EntityFieldValue:MDMService:Item:ManageItemBy:NONE")},{id:1,text:l("EntityFieldValue:MDMService:Item:ManageItemBy:LOT")},{id:2,text:l("EntityFieldValue:MDMService:Item:ManageItemBy:SERIAL")}],expiredType:[{id:0,text:l("EntityFieldValue:MDMService:Item:ExpiredType:DAY")},{id:1,text:l("EntityFieldValue:MDMService:Item:ExpiredType:WEEK")},{id:2,text:l("EntityFieldValue:MDMService:Item:ExpiredType:MONTH")},{id:3,text:l("EntityFieldValue:MDMService:Item:ExpiredType:YEAR")}],itemTypes:[{id:0,text:l("EntityFieldValue:MDMService:Item:ItemTypes:Item")},{id:1,text:l("EntityFieldValue:MDMService:Item:ItemTypes:POSM")},{id:2,text:l("EntityFieldValue:MDMService:Item:ItemTypes:Discount")},{id:3,text:l("EntityFieldValue:MDMService:Item:ItemTypes:Voucher")}],valuationMethod:[{id:"A",text:"Moving Average"},{id:"S",text:"Standard"},{id:"F",text:"FIFO"},{id:"B",text:"Serial/Batch"}]},gridInfo.instance.loadingPanel=gridInfo.element.loadingPanel.dxPopup({height:100,width:100,showTitle:!1,animation:null,contentTemplate:e=>$("<div/>").dxLoadIndicator({height:60,width:60})}).appendTo("body").dxPopup("instance"),gridInfo.instance.loadingPanel.registerKeyHandler("escape",(()=>gridInfo.instance.loadingPanel.hide()))}));let notify=e=>{obj={type:"success",position:"bottom right",message:"Message Placeholder",...e},DevExpress.ui.notify({message:obj.message,height:45,width:250,minWidth:250,type:obj.type,displayTime:5e3,animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:40,to:0}}},{position:obj.position})};function createNumberBox(e,t){return{label:{text:e},dataField:t,editorType:"dxTextBox",editorOptions:{onKeyDown(e){const{event:t}=e,r=t.key||String.fromCharCode(t.which);/^[^0-9]$/.test(r)&&t.preventDefault()}},validationRules:[{type:"stringLength",max:20,message:l("WarnMessage.FieldLength").replace("{0}",20)}]}}function getAttrField(e){return gridInfo.itemAttr[e].map((({attributeNumber:e,name:t,id:r})=>({label:{text:t},dataField:"attrID"+e,editorType:"dxSelectBox",editorOptions:{dataSource:store.getItemAttrValue,valueExpr:"code",displayExpr:"name"}})))}rpcService.itemAttr.getListDevExtreme({filter:JSON.stringify([["active","=","Y"],"and",["type","=","IN"]])}).then((({data:e})=>{gridInfo.itemAttr={hierarchy:e.filter((e=>null!=e.hierarchyLevel)).sort(((e,t)=>e.attributeNumber-t.attributeNumber)),flat:e.filter((e=>null==e.hierarchyLevel)).sort(((e,t)=>e.attributeNumber-t.attributeNumber)),count:e.length}}));